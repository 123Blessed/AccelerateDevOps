name: Linter

on: [workflow_dispatch]


jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout Code
        uses: actions/checkout@v2
        with:
          fetch-depth: 0

      - name: Run npm install
        run: |
          npm install eslint --save-dev
          npm install eslint-formatter-sarif --save-dev
          node_modules/.bin/eslint build docs lib script spec-main -f node_modules/@microsoft/eslint-formatter-sarif/sarif.js -o results.sarif || true
      
      - uses: github/codeql-action/upload-sarif@v1
        with:
          sarif_file: results.sarif
